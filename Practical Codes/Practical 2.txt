//MERGE SORT
#include <stdio.h>

int main() {
    int n;

    printf("Enter number of elements: ");
    scanf("%d", &n);

    int arr[n];
    printf("Enter %d elements: ", n);
    for (int i = 0; i < n; i++) {
        scanf("%d", &arr[i]);
    }

    long long comparisons = 0;

    // ---------- MERGE SORT WITHOUT FUNCTIONS ----------
    int size, left, mid, right;

    for (size = 1; size < n; size = size * 2) {
        for (left = 0; left < n - 1; left += 2 * size) {

            mid = left + size - 1;
            right = left + 2 * size - 1;

            if (mid >= n - 1)
                continue;
            if (right >= n)
                right = n - 1;

            int i = left;
            int j = mid + 1;
            int k = 0;

            int temp[right - left + 1];

            while (i <= mid && j <= right) {
                comparisons++;    // counting comparison

                if (arr[i] <= arr[j]) {
                    temp[k++] = arr[i++];
                } else {
                    temp[k++] = arr[j++];
                }
            }

            while (i <= mid)
                temp[k++] = arr[i++];

            while (j <= right)
                temp[k++] = arr[j++];

            k = 0;
            for (i = left; i <= right; i++)
                arr[i] = temp[k++];
        }
    }
    // -----------------------------------------------------

    printf("\nSorted array: ");
    for (int i = 0; i < n; i++) {
        printf("%d ", arr[i]);
    }
    printf("\nTotal comparisons: %lld\n", comparisons);

    return 0;
}